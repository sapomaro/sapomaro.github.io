(()=>{"use strict";var t={711:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".form__button_round{width:auto;min-width:3rem;min-height:3rem;margin:0 1rem 0 0;border-radius:1.5rem;padding:1rem;line-height:1rem;text-align:center}",""]);const c=a},688:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".form__button{display:inline-block;box-sizing:border-box;padding:1rem;font-weight:500;border:none;cursor:pointer;background:rgba(0,0,0,0);text-decoration:none}.form__button:disabled{cursor:not-allowed;background:#999 !important}.form__button:enabled:active{transform:scale(0.98)}.form__button_danger{background:#ff2f2f !important}.form__button_standard{display:inline-block;width:100%;max-width:23rem;margin:2rem 0 0;font-size:1.2rem;color:#fff;background:#3369f3;border-radius:.8rem}.form__button_standard:enabled:hover{filter:brightness(1.3)}",""]);const c=a},571:(t,e,n)=>{n.d(e,{Z:()=>v});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),c=n(667),s=n.n(c),l=new URL(n(619),n.b),u=new URL(n(891),n.b),p=new URL(n(559),n.b),f=new URL(n(84),n.b),d=a()(o()),h=s()(l),y=s()(u),b=s()(p),m=s()(f);d.push([t.id,".chatbox__header{position:sticky;top:0;flex:0 1 2rem;width:100%;display:flex;justify-content:space-between;align-items:flex-start;padding:1rem 0;border-bottom:2px solid #eaeaea;background:#fff}.chatbox__body{flex:1;display:flex;margin:1rem 0;padding:1rem 0;flex-flow:column;justify-content:flex-end}.chatbox__footer{position:sticky;bottom:0;flex:0 1 2rem;width:100%;display:flex;justify-content:space-between;align-items:flex-start;padding:1rem 0;border-top:2px solid #eaeaea;background:#fff}.chatbox__stub{flex:1;display:flex;align-items:center;justify-content:center;color:#999}.chatbox__header-avatar{flex:0 0 3rem;height:3rem;width:3rem;border-radius:50%;background:#efefef}.chatbox__header-text{flex:1;margin:0 1rem;font-size:1rem;padding:1rem 0}.chatbox__header-control-wrapper,.chatbox__footer-control-wrapper{display:block;flex:0}.chatbox__attach-control{background:url("+h+");background-repeat:no-repeat;background-position:center;background-size:contain}.chatbox__header-control,.chatbox__attach-control{display:inline-block;box-sizing:border-box;width:3rem;height:3rem;padding:1rem;border:none;border-radius:50%;font-size:2rem;line-height:1rem;font-weight:bold;text-align:center;cursor:pointer}.chatbox__header-control:active,.chatbox__attach-control:active{transform:scale(0.98)}.chatbox__header-control:hover,.chatbox__dropdown-toggle:checked+.chatbox__header-control{color:#3369f3;background:#efefef}.chatbox__send-button{height:3rem;width:3rem;align-self:flex-end}.chatbox__icon_photo{background:url("+y+")}.chatbox__icon_file{background:url("+b+")}.chatbox__icon_location{background:url("+m+")}.chatbox__icon{display:inline-block;width:1.5rem;height:1.5rem;margin-right:1rem;vertical-align:bottom;background-repeat:no-repeat;background-position:center;background-size:contain}.chatbox__icon-circle{display:inline-block;box-sizing:border-box;margin-right:.5rem;width:2rem;height:2rem;font-size:2rem;line-height:1.7rem;padding:0;color:#3369f3;border:2px solid #3369f3;border-radius:50%;vertical-align:middle;text-align:center}.chatbox__icon_danger{color:#ff2f2f;border-color:#ff2f2f}.chatbox__element_hidden{display:none}.chatbox__dropdown{display:none;position:absolute}.chatbox__dropdown-element{position:relative;display:block;margin:1.5rem;box-sizing:border-box;cursor:pointer}.chatbox__dropdown_top{margin-top:-0.5rem;margin-left:-21rem;width:27rem}.chatbox__dropdown_bottom{margin-top:-19rem;margin-left:-3rem;width:22rem}.chatbox__dropdown-toggle:checked+.chatbox__dropdown-control+.chatbox__dropdown{display:block}.chatbox__dropdown-menu{display:block;padding:1rem;margin:2rem;font-size:1.2rem;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:1rem;background:#fff}",""]);const v=d},260:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".chatlist__controls{display:flex;justify-content:space-between;align-items:center}.chatlist__item{cursor:pointer}.chatlist__item_hidden{display:none}.chatlist__item:hover,.chatlist__item_active{background:#e4edfd}.chatlist__item-wrapper{display:flex;padding:1rem 0;margin:-2px 1.5rem 0;border-top:2px solid #eaeaea}.chatlist__item-avatar{flex:0 0 4rem;height:4rem;width:4rem;border-radius:50%;background:#efefef;background-repeat:no-repeat;background-position:center;background-size:cover}.chatlist__item-text{flex:1;margin:0 1rem}.chatlist__item-info{flex:0;display:flex;flex-flow:column;justify-content:space-between;align-items:flex-end}.chatlist__item-name{font-weight:bold;margin-bottom:.5rem}.chatlist__item-message-quote{word-wrap:break-word;overflow-wrap:anywhere;color:#999}.chatlist__item-time{font-size:.75rem;color:#999}.chatlist__item-unreads{font-size:.8rem;line-height:2rem;border-radius:50%;background:#3369f3;color:#fff;text-align:center;display:flex;justify-content:center;align-items:center}.chatlist__item-unreads-count:not(:empty){height:2rem;width:2rem}",""]);const c=a},513:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".chatbox__date{margin:2rem 0;color:#999;text-align:center}.chatbox__messages-wrapper{display:inherit;flex:inherit;flex-flow:inherit;align-items:inherit;justify-content:inherit}.chatbox__message{max-width:31rem;padding:1rem;margin:1rem 0;border-radius:1rem}.chatbox__message_inc{align-self:flex-start;background:#f8f8f8;border-top-left-radius:0}.chatbox__message_out{align-self:flex-end;background:#e4edfd;border-bottom-right-radius:0}.chatbox__message-text{white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere}.chatbox__message-info{padding:.25rem 0 0 1rem;font-size:.75rem;float:right}.chatbox__message_inc .chatbox__message-info{color:#999}.chatbox__message_out .chatbox__message-info{color:#3369f3}.chatbox__message-status{font-size:.6rem;letter-spacing:-3px;margin-left:-4px;padding-right:4px}",""]);const c=a},805:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".form{width:inherit;display:inherit;justify-content:inherit;align-items:inherit}.form__input-error{font-size:.75rem;color:#ff2f2f}.form__element_hidden{display:none}.form__section-break{margin:1rem 0}",""]);const c=a},552:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".form__input_file{visibility:hidden}.form__input_file-wrapper{display:block}.form__input_file-note{color:#999}",""]);const c=a},821:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".form__input_field{position:relative;z-index:2;display:block;font-size:1.2rem;width:100%;box-sizing:border-box;max-width:30rem;background:rgba(0,0,0,0);outline:none}",""]);const c=a},39:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".chatbox__send-textarea{box-sizing:border-box;min-height:3rem;width:100%;margin:0 1rem;padding:1rem 2rem;border:none;border-radius:1.5rem;outline:none;resize:none;overflow:hidden;font:inherit;background:#efefef;color:#999}.chatbox__send-textarea:focus{color:#222}",""]);const c=a},324:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".form__row-label{font-size:1.2rem}.form__input_field_right{text-align:right;color:#999;font-size:1.2rem;border:none}.form__text_right{text-align:right}",""]);const c=a},215:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),c=n(667),s=n.n(c),l=new URL(n(353),n.b),u=a()(o()),p=s()(l);u.push([t.id,".chatlist__search-field-wrapper{border-radius:.5rem;margin:2rem 0;background:#efefef;color:#999}.chatlist__search-field-wrapper:focus{color:#222}.chatlist__search-field{display:block;font-size:1rem;padding:1rem 1rem 1rem 3rem;border:none}.chatlist__search-label{position:absolute;z-index:1;padding:1rem;margin-top:-3.25rem}.chatlist__search-label-text{display:none}.chatlist__search-label-icon{display:inline-block;width:1.5rem;height:1.5rem;vertical-align:bottom;background:url("+p+');background-repeat:no-repeat;background-position:center;background-size:contain}.chatlist__search-field[value=""]+.chatlist__search-label .chatlist__search-label-text{display:inline}.chatlist__search-field:focus+.chatlist__search-label .chatlist__search-label-text{display:none}.chatlist__search-label>*{vertical-align:middle}',""]);const f=u},228:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,'.form__input_field_standard{padding:1rem 0 .7rem;margin-bottom:.25rem;border:none;border-bottom:1px solid #3369f3}.form__input_field_error{border-bottom:1px solid #ff2f2f}.form__input-label{position:absolute;z-index:1;padding:.5rem 0;color:#999}.form__input_field_standard+.form__input-label,.form__input_field_standard:focus+.form__input-label{margin-top:-4.15rem;font-size:.75rem}.form__input_field_standard[value=""]:not(:focus)+.form__input-label{margin-top:-2.75rem;font-size:1rem}',""]);const c=a},211:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".scrollable{scrollbar-width:thin;scrollbar-color:#ccc #eaeaea;height:100vh;overflow-y:auto;overflow-x:hidden}.scrollable::-webkit-scrollbar{width:5px;height:5px;background-color:#eaeaea}.scrollable::-webkit-scrollbar-thumb{background:#ccc;border-radius:5px}.container_chatbox{display:flex;flex:1 1 75%;align-self:stretch;padding:0 2rem;flex-flow:column;justify-content:space-between}.sidebar_chatlist{flex:1 1 25%;min-width:11rem}",""]);const c=a},575:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".container_narrow{flex:0 1 23rem;padding:2rem;margin:2rem auto;box-shadow:0 0 6px rgba(0,0,0,.14);border-radius:1rem;align-items:center;align-self:center}",""]);const c=a},498:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".container__header_big{font-size:2.5rem}.container_wide{flex:0 1 45rem;padding:1rem 5rem 5rem 1rem}.sidebar{align-self:stretch;background:#fbfbfb;border-right:2px solid #eaeaea}.sidebar_nav{display:flex;flex:0 0 2rem;padding:1rem;justify-content:center}.sidebar__control{position:fixed;top:50%;left:.5rem}",""]);const c=a},97:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,"html,body{padding:0;margin:0}html{position:relative;min-height:100%;font-size:14px;font-family:Inter,sans-serif}body{position:relative;height:100%;min-height:100vh;background:#fff;color:#222}.root{position:relative;width:100vw;max-width:100%;min-height:100vh;display:flex;justify-content:space-between;align-items:center}.container{margin:0 auto;background:#fff}.container__header{font-style:normal;font-weight:500;font-size:1.5rem;line-height:1.5rem;text-align:center;margin:1rem 0 3rem}.container__row{display:flex;margin:1rem;padding:1rem 0 0;justify-content:space-between;align-items:flex-start}.container__row+.container__row{border-top:2px solid #eaeaea}.container__element{position:relative;display:block;margin:1rem;box-sizing:border-box}.container__element_centered{text-align:center;justify-content:center}.container__element_adjacent{margin-top:-1rem;min-height:1px}.container__element_right{text-align:right;justify-content:flex-end}ul,li{margin:0;padding:0;list-style-type:none}",""]);const c=a},456:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".container__link{color:#3369f3;text-decoration:none;cursor:pointer}.container__link:hover{filter:brightness(0.9);text-decoration:underline}.container__link_danger{color:#ff2f2f}.container__link_secondary{color:#999}.container__link_underlined{text-decoration:underline}a{color:inherit;text-decoration:inherit}",""]);const c=a},282:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),c=n(667),s=n.n(c),l=new URL(n(910),n.b),u=a()(o()),p=s()(l);u.push([t.id,".form__avatar{width:10rem;height:10rem;display:flex;margin:2rem auto;background:#efefef url("+p+");background-repeat:no-repeat;background-position:center;background-size:cover;border-radius:50%}.form__avatar-control{visibility:hidden;display:flex;flex:1;justify-content:center;align-items:center;border-radius:50%;background:rgba(0,0,0,.5);color:#fff;padding:1rem;font-size:1.1rem;text-align:center;cursor:pointer}.form__avatar:hover .form__avatar-control{visibility:visible}",""]);const f=u},420:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(81),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".popup{position:fixed;z-index:100;display:none;top:0;bottom:0;left:0;right:0;overflow:hidden;background:rgba(0,0,0,.5);justify-content:center;flex-direction:row}",""]);const c=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],c=0;c<t.length;c++){var s=t[c],l=r.base?s[0]+r.base:s[0],u=i[l]||0,p="".concat(l," ").concat(u);i[l]=u+1;var f=n(p),d={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var h=o(d,r);r.byIndex=c,e.splice(c,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var s=r(t,o),l=0;l<i.length;l++){var u=n(i[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=s}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},559:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyMiAyMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDEuNUgxOEMxOS4zODA3IDEuNSAyMC41IDIuNjE5MjkgMjAuNSA0VjEySDE2QzEzLjc5MDkgMTIgMTIgMTMuNzkwOSAxMiAxNlYyMC41SDRDMi42MTkyOSAyMC41IDEuNSAxOS4zODA3IDEuNSAxOFY0QzEuNSAyLjYxOTI5IDIuNjE5MjkgMS41IDQgMS41Wk0xMiAyMkg0QzEuNzkwODYgMjIgMCAyMC4yMDkxIDAgMThWNEMwIDEuNzkwODYgMS43OTA4NiAwIDQgMEgxOEMyMC4yMDkxIDAgMjIgMS43OTA4NiAyMiA0VjEyVjE4QzIyIDIwLjIwOTEgMjAuMjA5MSAyMiAxOCAyMkgxMloiIGZpbGw9IiMzMzY5RjMiLz4KPC9zdmc+Cg=="},619:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjE4NjYyIDEzLjVMMTQuNzYyOCA1LjkyMzg5TDE1LjcwNTYgNi44NjY3TDguMTI5NDMgMTQuNDQyOEw3LjE4NjYyIDEzLjVaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOS43MDA2NyAxNi4wMTQxTDE3LjI3NjggOC40Mzc5M0wxOC4yMTk2IDkuMzgwNzRMMTAuNjQzNSAxNi45NTY5TDkuNzAwNjcgMTYuMDE0MVoiIGZpbGw9IiM5OTk5OTkiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS4wNDMzIDIxLjM1NjdMMjIuNjE5NSAxMy43ODA2TDIzLjU2MjMgMTQuNzIzNEwxNS45ODYxIDIyLjI5OTVMMTUuMDQzMyAyMS4zNTY3WiIgZmlsbD0iIzk5OTk5OSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3LjU1NzQgMjMuODcwOEwyNS4xMzM1IDE2LjI5NDZMMjYuMDc2MyAxNy4yMzc0TDE4LjUwMDIgMjQuODEzNkwxNy41NTc0IDIzLjg3MDhaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNTU3NCAyMy44NzA5QzE0Ljk0MjMgMjYuNDg2IDEwLjcxMTggMjYuNDk1NCA4LjEwODMxIDIzLjg5MTlDNS41MDQ4MiAyMS4yODg0IDUuNTE0MjQgMTcuMDU3OSA4LjEyOTM2IDE0LjQ0MjhMNy4xODY1NSAxMy41QzQuMDQ4NCAxNi42MzgxIDQuMDM3MSAyMS43MTQ4IDcuMTYxMjkgMjQuODM5QzEwLjI4NTUgMjcuOTYzMiAxNS4zNjIxIDI3Ljk1MTggMTguNTAwMyAyNC44MTM3TDE3LjU1NzQgMjMuODcwOVoiIGZpbGw9IiM5OTk5OTkiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMi42MTk1IDEzLjc4MDZMMjMuNTYyMyAxNC43MjM0QzI2LjAwMyAxMi4yODI2IDI2LjAxMTggOC4zMzQxIDIzLjU4MTkgNS45MDQxN0MyMS4xNTIgMy40NzQyNCAxNy4yMDM1IDMuNDgzMDMgMTQuNzYyNyA1LjkyMzgxTDE1LjcwNTUgNi44NjY2MkMxNy42MjMzIDQuOTQ4ODcgMjAuNzI1NyA0Ljk0MTk2IDIyLjYzNDkgNi44NTExOUMyNC41NDQxIDguNzYwNDIgMjQuNTM3MiAxMS44NjI4IDIyLjYxOTUgMTMuNzgwNloiIGZpbGw9IiM5OTk5OTkiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05LjcwMDkyIDE2LjAxNDRDNy45NTc1MSAxNy43NTc4IDcuOTUxMjMgMjAuNTc4MiA5LjY4Njg5IDIyLjMxMzhDMTEuNDIyNiAyNC4wNDk1IDE0LjI0MjkgMjQuMDQzMiAxNS45ODYzIDIyLjI5OThMMTUuMDQzNSAyMS4zNTdDMTMuODIzMSAyMi41Nzc0IDExLjg0ODkgMjIuNTgxOCAxMC42MzM5IDIxLjM2NjhDOS40MTg5NCAyMC4xNTE4IDkuNDIzMzQgMTguMTc3NiAxMC42NDM3IDE2Ljk1NzJMOS43MDA5MiAxNi4wMTQ0WiIgZmlsbD0iIzk5OTk5OSIvPgo8L3N2Zz4K"},84:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyMiAyMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41IDExQzIwLjUgMTYuMjQ2NyAxNi4yNDY3IDIwLjUgMTEgMjAuNUM1Ljc1MzI5IDIwLjUgMS41IDE2LjI0NjcgMS41IDExQzEuNSA1Ljc1MzI5IDUuNzUzMjkgMS41IDExIDEuNUMxNi4yNDY3IDEuNSAyMC41IDUuNzUzMjkgMjAuNSAxMVpNMjIgMTFDMjIgMTcuMDc1MSAxNy4wNzUxIDIyIDExIDIyQzQuOTI0ODcgMjIgMCAxNy4wNzUxIDAgMTFDMCA0LjkyNDg3IDQuOTI0ODcgMCAxMSAwQzE3LjA3NTEgMCAyMiA0LjkyNDg3IDIyIDExWk0xMSAxNEMxMi42NTY5IDE0IDE0IDEyLjY1NjkgMTQgMTFDMTQgOS4zNDMxNSAxMi42NTY5IDggMTEgOEM5LjM0MzE1IDggOCA5LjM0MzE1IDggMTFDOCAxMi42NTY5IDkuMzQzMTUgMTQgMTEgMTRaIiBmaWxsPSIjMzM2OUYzIi8+Cjwvc3ZnPgo="},891:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyMiAyMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDEuNUgxOEMxOS4zODA3IDEuNSAyMC41IDIuNjE5MjkgMjAuNSA0VjE0TDE0LjUxOTQgMTIuNDA1MkMxMy41MTA4IDEyLjEzNjIgMTIuNDcxNCAxMiAxMS40Mjc1IDEySDEwLjU3MjVDOS41Mjg2NCAxMiA4LjQ4OTIxIDEyLjEzNjIgNy40ODA1NyAxMi40MDUyTDEuNSAxNFY0QzEuNSAyLjYxOTI5IDIuNjE5MjkgMS41IDQgMS41Wk0wIDRDMCAxLjc5MDg2IDEuNzkwODYgMCA0IDBIMThDMjAuMjA5MSAwIDIyIDEuNzkwODYgMjIgNFYxOEMyMiAyMC4yMDkxIDIwLjIwOTEgMjIgMTggMjJINEMxLjc5MDg2IDIyIDAgMjAuMjA5MSAwIDE4VjRaTTggNkM4IDcuMTA0NTcgNy4xMDQ1NyA4IDYgOEM0Ljg5NTQzIDggNCA3LjEwNDU3IDQgNkM0IDQuODk1NDMgNC44OTU0MyA0IDYgNEM3LjEwNDU3IDQgOCA0Ljg5NTQzIDggNloiIGZpbGw9IiMzMzY5RjMiLz4KPC9zdmc+Cg=="},353:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMS41OTI0IDExLjQxMzhDMTAuMTYwNSAxMi44NDU3IDcuODM4ODYgMTIuODQ1NyA2LjQwNjk0IDExLjQxMzhDNC45NzUwMiA5Ljk4MTkgNC45NzUwMiA3LjY2MDMgNi40MDY5NCA2LjIyODM3QzcuODM4ODYgNC43OTY0NSAxMC4xNjA1IDQuNzk2NDUgMTEuNTkyNCA2LjIyODM3QzEzLjAyNDMgNy42NjAzIDEzLjAyNDMgOS45ODE5IDExLjU5MjQgMTEuNDEzOFpNMTIuMDMyOCAxMi43OTY4QzEwLjA3MjUgMTQuMjk2MiA3LjI1Njk2IDE0LjE0OTUgNS40NjQxMyAxMi4zNTY2QzMuNTExNTEgMTAuNDA0IDMuNTExNTEgNy4yMzgxOSA1LjQ2NDEzIDUuMjg1NTZDNy40MTY3NSAzLjMzMjk0IDEwLjU4MjYgMy4zMzI5NCAxMi41MzUyIDUuMjg1NTZDMTQuMzI3OSA3LjA3ODMxIDE0LjQ3NDcgOS44OTM3MyAxMi45NzU1IDExLjg1MzlMMTYuNTQyMyAxNS40MjA2TDE1LjU5OTQgMTYuMzYzNUwxMi4wMzI4IDEyLjc5NjhaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo="},910:(t,e,n)=>{t.exports=n.p+"8690f52776ba6a401f9c.png"}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.apply(this,arguments)},e=new(function(){function e(){if(this.routes={},this.basePath="",this.currentRoute="",this.currentPathname="",this.firstRender=!0,this.notFoundRoute="",e.__instance)return e.__instance;e.__instance=this,this.init()}return e.prototype.init=function(){var t=this;window.addEventListener("popstate",(function(e){e&&e.state&&e.state.pathname&&t.navigate(e.state.pathname)}))},e.prototype.registerRoutes=function(e){this.routes=t(t({},this.routes),e)},e.prototype.registerNotFound=function(e){this.routes=t(t({},this.routes),e),this.notFoundRoute=Object.keys(e).pop()},e.prototype.getCurrentPathname=function(t){void 0===t&&(t=!0);var e=this.currentPathname;return t&&"/"===e[0]&&(e=e.slice(1)),e},e.prototype.searchRealRoute=function(t){var e,n;if(t in this.routes)return t;try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(this.routes)),o=r.next();!o.done;o=r.next()){var i=o.value;if(new RegExp("^"+i+"$").test(t))return i}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},e.prototype.getRealRoute=function(t){t.length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));var e=this.searchRealRoute(t);return null===e?this.notFoundRoute?this.notFoundRoute:null:e},e.prototype.renderRoute=function(t,e){this.currentView&&this.currentView.unmount(),this.currentView=this.routes[t],this.currentRoute=t,this.currentPathname=e,this.currentView.renderToBody()},e.prototype.redirect=function(t){var e=this.getRealRoute(t);null!==e&&(history.replaceState({route:e,pathname:t},"",this.basePath+t),this.renderRoute(e,t))},e.prototype.navigate=function(t){var e=this.getRealRoute(t);null!==e&&(this.firstRender?(e===this.notFoundRoute&&(e="/"),history.replaceState({route:e,pathname:t},"",this.basePath+t),this.firstRender=!1):history.state&&history.state.route&&history.state.route===e||history.pushState({route:e,pathname:t},"",this.basePath+t),this.renderRoute(e,t))},e.prototype.back=function(){history.back()},e.prototype.forward=function(){history.forward()},e}()),r=n(379),o=n.n(r),i=n(795),a=n.n(i),c=n(569),s=n.n(c),l=n(565),u=n.n(l),p=n(216),f=n.n(p),d=n(589),h=n.n(d),y=n(575),b={};b.styleTagTransform=h(),b.setAttributes=u(),b.insert=s().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=f(),o()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;var m=n(97),v={};v.styleTagTransform=h(),v.setAttributes=u(),v.insert=s().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=f(),o()(m.Z,v),m.Z&&m.Z.locals&&m.Z.locals;var _=function(){function t(){this.isDOMLoaded=!1,this.listeners={}}return t.prototype.listEvents=function(t,e){var n=this;t.split(/[, ]+/).forEach((function(t){n.listeners[t]||(n.listeners[t]=[]),e(t)}))},t.prototype.on=function(t,e){var n=this;this.listEvents(t,(function(t){n.listeners[t].push(e),"init"!==t&&"load"!==t||g.isDOMReady&&(e(),g.isDOMLoaded=!0)}))},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.listEvents(t,(function(t){e.listeners[t].forEach((function(t){t.apply(e,n)}))}))},t.prototype.off=function(t,e){var n=this;this.listEvents(t,(function(t){n.listeners[t]=n.listeners[t].filter((function(t){return t!==e}))}))},Object.defineProperty(t.prototype,"isDOMReady",{get:function(){return"interactive"===document.readyState&&void 0!==document.body&&void 0!==document.head||"complete"===document.readyState},enumerable:!1,configurable:!0}),t.prototype.load=function(){this.emit("init, load"),this.isDOMLoaded=!0},t.prototype.init=function(){var t=this;this.isDOMReady?this.load():(window.addEventListener("DOMContentLoaded",(function(){t.isDOMReady&&t.load()})),window.addEventListener("load",(function(){t.isDOMLoaded||t.load()})))},t}(),g=new _;g.init(),g.Model=_,g.on("init",(function(){var t=document.head,e=t.querySelector("title"),n=t.querySelector("meta[charset]"),r=t.querySelector("meta[name=viewport]");e||(e=document.createElement("title"),t.appendChild(e)),e.innerHTML="%{title}%",n||(n=document.createElement("meta"),t.appendChild(n)),n.setAttribute("charset","utf-8"),r||((r=document.createElement("meta")).setAttribute("name","viewport"),t.appendChild(r)),r.setAttribute("content","width=device-width, initial-scale=1")}));var w=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function M(t){return"object"==typeof t&&null!==t&&t.constructor===Object}function S(t){return 0===Object.keys(t).length}function E(t,e){return"object"==typeof e&&null!==e&&("string"==typeof t||"number"==typeof t)&&t in e&&void 0!==e[t]}function T(t){return M(t)||function(t){return Array.isArray(t)}(t)}function I(t,e){return function t(e,n){var r,o;if(e===n)return!0;if(e instanceof Array){if(!(n instanceof Array))return!1;if(0===n.length)return!1;for(var i=n.length-1;i>=0;--i)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Object){if(!(n instanceof Object))return!1;if(S(n))return!1;try{for(var a=w(Object.entries(n)),c=a.next();!c.done;c=a.next()){var s=x(c.value,2),l=s[0],u=s[1];if(!E(l,e))return!1;if(!t(e[l],u))return!1}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return!0}return!1}(t,e)}function j(t,e){return Math.floor(Math.random()*(e-t+1))+t}var O,N=function(t){try{return JSON.parse(t.replace(/^\"|\"$/g,""))}catch(e){return console.warn("JSON.parse failed",t,e),{}}},A=function(t){try{return JSON.stringify(t)}catch(e){return console.warn("JSON.stringify failed",t,e),"{}"}},k=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},P=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},C=function(){function t(t){void 0===t&&(t=window),this.context=t,this.PP_PATTERN=/%\{\s?([^]*?)\s?\}%/g,this.PP_SUBPATTERN_JSONFUNC=/^([^( ]+)\(\s?([{[][^]*?[}\]])(\.\.\.)?\s?\)$/}return t.prototype.resolveVariable=function(t){var e,n,r=this.context,o=t.split(".");try{for(var i=k(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(null===r)return null;if("object"!=typeof r&&"function"!=typeof r)return null;if(!(c in r))return null;r=r[c]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.resolveSubPattern=function(t){var e,n,r,o=this.context;if(this.PP_SUBPATTERN_JSONFUNC.lastIndex=0,!(r=this.PP_SUBPATTERN_JSONFUNC.exec(t)))return this.resolveVariable(t);var i=r[1],a=r[2].replace(/([{,"])\s*(\\[\\tn]+)\s*([},"])/g,"$1 $3").replace(/&quot;/gi,'"'),c=r[3],s=N(a),l=o[i];if("function"==typeof l){var u=[];c&&s instanceof Array||(s=[s]);var p=function(t){if(l.hasOwnProperty("prototype")){var e=l;u.push(new e(t))}};try{for(var f=k(s),d=f.next();!d.done;d=f.next())p(d.value)}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return u}return null},t.prototype.resolveAssets=function(t){if(this.PP_PATTERN.lastIndex=0,!this.PP_PATTERN.test(t))return[];var e,n,r=[],o="",i=0,a=0;for(this.PP_PATTERN.lastIndex=0;n=this.PP_PATTERN.exec(t);)i!==(a=this.PP_PATTERN.lastIndex-n[0].length)&&(o=t.slice(i,a),r.push(o)),i=this.PP_PATTERN.lastIndex,null!==(e=this.resolveSubPattern(n[1].trim()))?e instanceof Array?r.push.apply(r,P([],D(e),!1)):r.push(e):r.push(n[0]);return t.length>i&&(o=t.slice(i,t.length),r.push(o)),r},t.prototype.resolveAssetsRecursive=function(t){var e=this.resolveAssets(t);if(e.length>0&&(1!==e.length||e[0]!==t)){for(var n=void 0,r=0;r<e.length;++r)"string"==typeof e[r]&&null!==(n=this.resolveAssetsRecursive(e[r]))&&(e.splice.apply(e,P([r,1],D(n),!1)),r+=n.length-1);return e}return[t]},t.prototype.resolve=function(t){return null!==t?this.resolveAssetsRecursive(t):[]},t}(),L=(O=function(t,e){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},O(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),z=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},R={},U={},Q=function(t){function e(n){void 0===n&&(n={});var r=t.call(this)||this;return r.element=null,r.propsCurrentUpdate={},r.props=r.makePropsProxy(n),r.blockuid=function(){var t,e,n="";do{t=j(1,99999),e=j(1,99999),n="id_".concat(t,"_").concat(e,"_")}while(R[n]);return R[n]=!0,n}(),U[r.blockuid]=r,r.templator=new C(r.props),r.registerEvents(),r.emit(e.EVENTS.INIT),r}return L(e,t),e.prototype.registerEvents=function(){var t=this;this.nativeEventsList=[],this.on(e.EVENTS.UPDATE,(function(){t.replaceMultipleNodes("[data-blockuid=".concat(t.blockuid,"]"),[t])})),this.on("eventAttached",(function(e){t.nativeEventsList.push(e)})),this.on("".concat(e.EVENTS.BEFORERENDER,", ").concat(e.EVENTS.UNMOUNT),(function(){var n,r;try{for(var o=z(t.nativeEventsList),i=o.next();!i.done;i=o.next()){var a=i.value,c=a.node,s=a.eventType,l=a.callback;"object"==typeof c&&c instanceof HTMLElement&&c.removeEventListener(s,l)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.nativeEventsList=[],t.listDescendants((function(t){var n;t.emit(e.EVENTS.UNMOUNT),n=t.blockuid,delete R[n],delete U[n]}))}))},e.prototype.unmount=function(){var t,n,r;this.emit(e.EVENTS.UNMOUNT);var o=this.getContent();if(o)try{for(var i=z(o),a=i.next();!a.done;a=i.next()){var c=a.value;null===(r=c.parentNode)||void 0===r||r.removeChild(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this.element=null},e.prototype.refresh=function(){this.emit(e.EVENTS.UPDATE)},e.prototype.isInDOM=function(){return null!==document.querySelector("[data-blockuid=".concat(this.blockuid,"]"))},e.prototype.getContent=function(){return document.querySelectorAll("[data-blockuid=".concat(this.blockuid,"]"))||this.element},e.prototype.getElement=function(){var t;return null===(t=this.getContent())||void 0===t?void 0:t[0]},e.prototype.setPropsWithoutRerender=function(t){this.setProps(t,!1)},e.prototype.setProps=function(t,n){void 0===n&&(n=!0),S(t)||I(this.props,t)||(this.propsCurrentUpdate=t,Object.assign(this.props,t),n&&this.emit(e.EVENTS.UPDATE))},e.prototype.listDescendants=function(t){var e,n,r,o,i=this.getContent();if(i)try{for(var a=z(i),c=a.next();!c.done;c=a.next()){var s=c.value;if(s instanceof HTMLElement){var l=s.querySelectorAll("[data-blockuid]");try{for(var u=(r=void 0,z(l)),p=u.next();!p.done;p=u.next()){var f=p.value;if(f instanceof HTMLElement&&f.dataset&&f.dataset.blockuid){var d=U[f.dataset.blockuid];d&&t(d)}}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},e.prototype.makePropsProxy=function(t){var e=function(t){if(0===t.indexOf("_"))throw new Error("Нельзя использовать _")};return new Proxy(t,{get:function(t,n){return e(n),t[n]},set:function(t,n,r){return e(n),t[n]!==r&&(t[n]=r),!0},deleteProperty:function(t,n){return e(n),delete t[n],!0}})},e.prototype.build=function(){var t=this;return this.emit(e.EVENTS.BEFORERENDER),this.element=this.buildNode(this.render.bind(this),this.props,(function(e){1===e.nodeType&&e.setAttribute("data-blockuid",t.blockuid)})),this.traverseChildren(this.element),this.emit(e.EVENTS.RENDER),this.element},e.prototype.render=function(t){return"".concat(null==t?void 0:t.value)},e.prototype.buildNode=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=document.createElement("DIV");r.innerHTML=t(e).trim();for(var o=document.createDocumentFragment();0!==r.childNodes.length;){var i=r.childNodes[0];n&&n(i),o.appendChild(i)}return o},e.prototype.replaceMultipleNodes=function(t,e){var n,r=document.querySelectorAll(t);if(r&&r.length){for(var o=r.length-1;o>0;--o)null===(n=r[o].parentNode)||void 0===n||n.removeChild(r[o]);this.replaceNode(r[0],e)}},e.prototype.resolveNode=function(t){var n=document.createTextNode("");return"string"==typeof t?n=document.createTextNode(t):"function"==typeof t?n=t.hasOwnProperty("prototype")&&t.prototype instanceof e?(new t).build():this.buildNode(t):"object"==typeof t&&(t instanceof e?n=t.build():t instanceof HTMLElement&&(n=t)),this.traverseChildren(n),n},e.prototype.replaceNode=function(t,n){var r,o,i,a,c,s=document.createDocumentFragment(),l=[];try{for(var u=z(n),p=u.next();!p.done;p=u.next()){var f=p.value;"object"==typeof f&&f instanceof e&&l.push(f);var d=this.resolveNode(f);s.appendChild(d)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}s.normalize(),null===(c=t.parentNode)||void 0===c||c.replaceChild(s,t);try{for(var h=z(l),y=h.next();!y.done;y=h.next()){var b=y.value;b.isInDOM()&&b.emit(e.EVENTS.REMOUNT)}}catch(t){i={error:t}}finally{try{y&&!y.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}},e.prototype.traverseText=function(t){var e=this.templator.resolve(t.textContent);1===e.length&&e[0]===t.textContent||this.replaceNode(t,e)},e.prototype.traverseChildren=function(t){if(t instanceof Node&&t.childNodes)for(var e=t.childNodes.length-1;e>=0;--e)if(1===t.childNodes[e].nodeType)this.traverseAttributes(t.childNodes[e]),this.traverseChildren(t.childNodes[e]);else if(3===t.childNodes[e].nodeType){if(t instanceof HTMLElement&&t.tagName&&"SCRIPT"===t.tagName)continue;this.traverseText(t.childNodes[e])}},e.prototype.traverseAttributes=function(t){for(var e,n,r=t.attributes.length-1;r>=0;--r){var o,i=null!==(e=t.attributes[r].nodeName)&&void 0!==e?e:"",a=null!==(n=t.attributes[r].nodeValue)&&void 0!==n?n:"";if("on"===i.slice(0,2)){if("function"==typeof(o=Z(this.templator.resolve(a),1)[0])){var c=o,s=i.slice(2);t.addEventListener(s,c),t.removeAttribute(i),this.emit("eventAttached",{node:t,eventType:s,callback:c})}}else"string"==typeof(o=Z(this.templator.resolve(a),1)[0])&&o!==a&&t.setAttribute(i,o)}},e.prototype.renderToBody=function(){var t=this;g.on("load",(function(){document.body.innerHTML="";var n=t.build();t.traverseChildren(n),document.body.appendChild(n),t.emit(e.EVENTS.MOUNT),t.listDescendants((function(t){t.emit(e.EVENTS.MOUNT)}))}))},e.EVENTS={INIT:"INIT",UNMOUNT:"unmounting",BEFORERENDER:"beforerendered",RENDER:"rendered",MOUNT:"mounted",REMOUNT:"remounted",UPDATE:"updated"},e}(g.Model),V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(t){function e(e){var n=t.call(this,e)||this;return n.on(Q.EVENTS.BEFORERENDER,(function(){n.updateTitle()})),n}return V(e,t),e.prototype.updateTitle=function(t){void 0===t&&(t="");var e=document.querySelector("title");e&&(t&&(this.props.title=t),e.innerHTML="%{title}%",this.traverseChildren(document.head))},e}(Q),G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t){function e(e){return t.call(this,e)||this}return G(e,t),e.prototype.render=function(){return'\n      %{popup}%\n      <div class="root">\n        <main class="container container_narrow">\n          %{contents}%\n        </main>\n      </div>\n    '},e}(B),Y=n(456),F={};F.styleTagTransform=h(),F.setAttributes=u(),F.insert=s().bind(null,"head"),F.domAPI=a(),F.insertStyleElement=f(),o()(Y.Z,F),Y.Z&&Y.Z.locals&&Y.Z.locals;var W=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(t){function n(n){var r=t.call(this,n)||this;return r.setPropsWithoutRerender({onclickHandler:"function"==typeof n.onclick?n.onclick:function(){"string"==typeof n.url&&e.navigate(n.url)}}),r}return W(n,t),n.prototype.render=function(t){return'\n      <a onclick="%{onclickHandler}%">\n        '.concat(t.label,"\n      </a>\n    ")},n}(Q),q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=new H({title:"Карта экранов приложения",popup:"",Link:function(t){function e(e){return t.call(this,e)||this}return q(e,t),e.prototype.render=function(t){return'\n      <li class="container__row container__element_centered">\n        <a onclick="%{onclickHandler}%" class="container__link">\n          '.concat(t.label,"\n        </a>\n      </li>\n    ")},e}(J)}),K=A([{url:"/",label:"Вход"},{url:"/sing-up",label:"Регистрация"},{url:"/settings",label:"Профиль"},{url:"/settings/edit",label:"Редактирование профиля"},{url:"/settings/password",label:"Смена пароля"},{url:"/chats",label:"Чаты"},{url:"/404",label:"Страница 404"},{url:"/500",label:"Страница 500"}]);X.props.contents=function(){return'\n  <h1 class="container__header">%{title}%</h1>\n  <nav><ul>\n    %{ Link('.concat(K,"...) }%\n  </ul></nav>\n")};var $=n(805),tt={};tt.styleTagTransform=h(),tt.setAttributes=u(),tt.insert=s().bind(null,"head"),tt.domAPI=a(),tt.insertStyleElement=f(),o()($.Z,tt),$.Z&&$.Z.locals&&$.Z.locals;var et,nt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(){return rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rt.apply(this,arguments)};!function(t){t.UPDATE="updated"}(et||(et={}));var ot=new(function(t){function e(){var n=t.call(this)||this;return n.EVENTS=et,n.state={user:null,chats:[],activeChatId:0,activeChatToken:"",activeChatMessages:[],isLoading:!1},e.__instance?e.__instance:(e.__instance=n,g.on("init",(function(){n.emit("init")})),g.on("load",(function(){n.emit("load")})),n)}return nt(e,t),e.prototype.setState=function(t){S(t)||I(this.state,t)||(Object.assign(this.state,t),this.emit(this.EVENTS.UPDATE,t))},e.prototype.getState=function(){return this.state},e}(g.Model));function it(t){return function(t){function e(e){var n=t.call(this,rt(rt({},e),ot.getState()))||this;return n.ignoreSyncProps=[],ot.on(ot.EVENTS.UPDATE,(function(t){if(n.ignoreSyncProps.length>0){var e=rt({},t);n.ignoreSyncProps.forEach((function(t){delete e[t]})),n.setProps(e)}else n.setProps(t)})),n}return nt(e,t),e.prototype.ignoreSync=function(t){this.ignoreSyncProps=t},e}(t)}var at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},st=function(t){function e(n){var r=t.call(this,n)||this;return r.props.onSubmit=function(t){var o,i;if(t.preventDefault(),ot.state.isLoading)return!1;var a=document.forms.namedItem(n.name);if(!(a instanceof HTMLFormElement))return!1;var c=new FormData(a),s={};try{for(var l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c.entries()),u=l.next();!u.done;u=l.next()){var p=ct(u.value,2),f=p[0],d=p[1];s[f]=d}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}var h={errorMsgs:{}};return r.listDescendants((function(e){e.emit("submit",t,h)})),Object.keys(h.errorMsgs).length?(r.emit(e.EVENTS.SUBMIT_FAIL,h.errorMsgs),r.listDescendants((function(n){n.emit(e.EVENTS.SUBMIT_FAIL,t,h.errorMsgs)}))):(r.emit(e.EVENTS.SUBMIT_SUCCESS,s,c),r.listDescendants((function(n){n.emit(e.EVENTS.SUBMIT_SUCCESS,t,s,c)}))),!1},r}return at(e,t),e.prototype.render=function(t){return'\n      <form name="'.concat(t.name,'" class="form"\n        action="').concat(t.action||"",'"\n        onsubmit="%{onSubmit}%">\n          %{fieldset}%\n      </form>\n    ')},e.EVENTS={SUBMIT_SUCCESS:"submitSuccess",SUBMIT_FAIL:"submitFail"},e}(Q),lt=function(t){return void 0===(e=function(t){return"string"==typeof t?ut(t):t})&&(e=function(t){return t}),function t(n){var r,o,i,a;if(null===n||"object"!=typeof n)return e(n);if(n instanceof Array){var c=[];try{for(var s=w(n),l=s.next();!l.done;l=s.next()){var u=l.value;c.push(t(u))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return c}if(n instanceof Object){c={};try{for(var p=w(Object.entries(n)),f=p.next();!f.done;f=p.next()){var d=x(f.value,2),h=d[0];u=d[1],c[h]=t(u)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return c}throw new Error("Unable to copy object: ".concat(n))}(t);var e},ut=function(t){return t.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\\/g,"&#8726;")},pt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e){return t.call(this,e)||this}return pt(e,t),e.prototype.render=function(t){var e;return t=lt(t),'\n      <div class="container__element container__element_centered\n          container__element_adjacent">\n        <span class="form__input-error">'.concat(null!==(e=t.currentError)&&void 0!==e?e:"","</span>\n      </div>\n    ")},e}(Q),dt=n(821),ht={};ht.styleTagTransform=h(),ht.setAttributes=u(),ht.insert=s().bind(null,"head"),ht.domAPI=a(),ht.insertStyleElement=f(),o()(dt.Z,ht),dt.Z&&dt.Z.locals&&dt.Z.locals;var yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(){return bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bt.apply(this,arguments)},mt=function(t){function e(e){var n=t.call(this,e)||this,r=n;return n.setPropsWithoutRerender({value:e.value||e.placeholder||"",onFocus:function(t){this.getAttribute("readonly")||(r.togglePlaceholder.call(r,t),r.props.focused=!0,r.emit("focus",t))},onBlur:function(t){this.getAttribute("readonly")||(r.validate.call(r,t),r.togglePlaceholder.call(r,t),r.props.focused=!1,r.emit("blur",t))},onInput:function(t){this.setAttribute("value",this.value),r.props.value=this.value,r.autoResize(this),r.emit("input",t)},onChange:function(t){this.setAttribute("value",this.value),r.props.value=this.value,r.validate.call(r,t),r.emit("change",t)}}),n.on("submit",(function(t,e){n.validate.call(n,t,e),setTimeout((function(){r.togglePlaceholder.call(r,t)}),10)})),n.isPasswordInput&&n.isRepeatInput&&g.on("passwordFieldChange",(function(t){n.props.value2=t})),n}return yt(e,t),Object.defineProperty(e.prototype,"hasActualValue",{get:function(){var t=this.props,e=t.value,n=t.placeholder;return!(!e||""===e||n&&n===e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPasswordInput",{get:function(){return this.props.type&&"password"===this.props.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRepeatInput",{get:function(){return"string"==typeof this.props.name&&"2"===this.props.name.slice(-1)},enumerable:!1,configurable:!0}),e.prototype.validate=function(t,e){this.isPasswordInput&&!this.isRepeatInput&&g.emit("passwordFieldChange",this.props.value);var n="";this.hasActualValue&&"string"==typeof this.props.value&&(n=this.props.value);var r=function(t){var e=t.name,n=t.value,r=t.value2,o=t.label;switch(e){case"login":if(0===n.length)return"Поле не может быть пустым";if(n.length<3)return"".concat(o," должен быть больше 3 символов");if(n.length>20)return"".concat(o," не может быть больше 20 символов");if(/^[0-9_-]+$/.test(n))return"".concat(o," не может состоять только из цифр или спецсимволов");if(!/^[A-Za-z0-9_-]+$/.test(n))return"".concat(o," может содержать только латинские буквы, ")+"цифры, дефис, нижнее подчёркивание";break;case"password":case"oldPassword":case"newPassword":if(0===n.length)return"Поле не может быть пустым";if(n.length<8)return"".concat(o," должен быть больше 8 символов");if(n.length>40)return"".concat(o," не может быть больше 40 символов");if(!/[0-9]/.test(n)||n===n.toLowerCase())return"".concat(o," должен содержать хотя бы одну цифру и заглавную букву");break;case"password2":case"newPassword2":if(0===n.length)return"Поле не может быть пустым";if(void 0!==r&&n!==r)return"Пароли не совпадают";break;case"first_name":case"second_name":if(0===n.length)return"Поле не может быть пустым";if(!/^[A-ZА-ЯЁ]/.test(n))return"Первая буква должна быть заглавной";if(/[0-9 ]/.test(n))return"".concat(o," не может содержать пробелы или цифры");if(/-$/.test(n))return"".concat(o," не может оканчиваться дефисом");if(/[А-ЯЁа-яё][А-ЯЁ]/.test(n))return"Заглавные буквы не могут быть в середине слова";if(!/^[A-ZА-ЯЁ][A-Za-zа-яё]+(-[A-ZА-ЯЁ]?[A-Za-zа-яё]+)*$/.test(n))return"".concat(o," может содержать только кириллицу/латиницу и дефисы");break;case"email":if(0===n.length)return"Поле не может быть пустым";if(!/[^@\s]+@[^@\s]+\.[^@\s]+/.test(n))return"Неверная электронная почта";break;case"phone":if(0===n.length)return"Поле не может быть пустым";if(n.length<10)return"".concat(o," должен быть больше 10 символов");if(n.length>15)return"".concat(o," не может быть больше 15 символов");if(/ |-/.test(n))return"".concat(o," не должен содержать пробелы или дефисы");if(!/^\+?[0-9]+$/.test(n))return"Неверный телефонный номер";break;case"display_name":if(0===n.length)return"Поле не может быть пустым";if(n.length<3)return"".concat(o," должен быть больше 3 символов");if(n.length>20)return"".concat(o," не может быть больше 20 символов");break;case"message":if(0===n.length)return"Сообщение не может быть пустым";break;case"avatar":if(0===n.length)return"Нужно выбрать файл";break;case"title":if(0===n.length)return"Поле не может быть пустым";if(n.length>40)return"Название не может быть больше 40 символов";break;default:return null}return null}(bt(bt({},this.props),{value:n}));r&&"string"==typeof this.props.name?(this.setProps({error:r}),e&&"object"==typeof e.errorMsgs&&null!==e.errorMsgs&&(e.errorMsgs[this.props.name]=r),t.preventDefault()):this.props.error&&this.setProps({error:null})},e.prototype.togglePlaceholder=function(t){if("string"==typeof this.props.placeholder&&t.type&&t.target){var e=t.target;"blur"===t.type&&""===e.value?e.value=this.props.placeholder:"focus"===t.type&&e.value===this.props.placeholder&&(e.value="")}},e.prototype.autoResize=function(t){if(t.nodeName&&"TEXTAREA"===t.nodeName){var e=window.getComputedStyle(t),n="border-box"===e.boxSizing?parseInt(e.borderBottomWidth,10)+parseInt(e.borderTopWidth,10):0;t.style.overflowY="hidden",t.style.height="auto",t.style.height=t.scrollHeight+n+"px"}},e}(Q),vt=n(228),_t={};_t.styleTagTransform=h(),_t.setAttributes=u(),_t.insert=s().bind(null,"head"),_t.domAPI=a(),_t.insertStyleElement=f(),o()(vt.Z,_t),vt.Z&&vt.Z.locals&&vt.Z.locals;var gt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(t){function e(e){return t.call(this,e)||this}return gt(e,t),e.prototype.render=function(t){return'\n      <div class="container__element">\n        <input name="'.concat(t.name,'" type="').concat(t.type||"text",'"\n          class="form__input_field form__input_field_standard \n            ').concat(t.error?" form__input_field_error":"",'"\n          value="').concat(t.value||"",'"\n          onblur="%{onBlur}%"\n          onfocus="%{onFocus}%"\n          oninput="%{onInput}%">\n        <label class="form__input-label">').concat(t.label,'</label>\n        <span class="form__input-error">').concat(t.error||"","</span>\n      </div>\n    ")},e}(mt),xt=n(688),Mt={};Mt.styleTagTransform=h(),Mt.setAttributes=u(),Mt.insert=s().bind(null,"head"),Mt.domAPI=a(),Mt.insertStyleElement=f(),o()(xt.Z,Mt),xt.Z&&xt.Z.locals&&xt.Z.locals;var St=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(t){function e(e){var n=t.call(this,e)||this;return e.onclick||(n.props.onclick=function(){return null}),n}return St(e,t),e.prototype.render=function(t){return'\n      <div class="container__element container__element_centered">\n        <button name="'.concat(t.name,'"\n          type="').concat(t.type||"button",'"\n          class="form__button form__button_standard ').concat(t.style||"",'"\n          onclick="%{onclick}%"\n          ').concat(t.isLoading?'disabled="disabled"':"",">\n            ").concat(t.isLoading?"Запрос обрабатывается...":t.label,'\n        </button>\n        <span class="form__input-error">').concat(t.error||"","</span>\n      </div>\n    ")},e}(Q),Tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),It=function(t){function e(e){return t.call(this,e)||this}return Tt(e,t),e.prototype.render=function(t){return'\n      <div class="container__element container__element_centered">\n        <a onclick="%{onclickHandler}%" class="container__link">\n          '.concat(t.label,"\n        </a>\n      </div>\n    ")},e}(J),jt=n(420),Ot={};Ot.styleTagTransform=h(),Ot.setAttributes=u(),Ot.insert=s().bind(null,"head"),Ot.domAPI=a(),Ot.insertStyleElement=f(),o()(jt.Z,Ot),jt.Z&&jt.Z.locals&&jt.Z.locals;var Nt,At=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(t){function e(e){var n=t.call(this,e)||this;return n.props.onClick=function(t){t.target===this&&g.emit("popupHide")},g.on("popupShow",(function(t){var e=document.getElementById(t);e&&(e.style.display="flex")})),g.on("popupHide",(function(){var t,e;ot.setState({currentError:null});var n=document.querySelectorAll(".popup");if(n)try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),o=r.next();!o.done;o=r.next())o.value.style.display="none"}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}})),n}return At(e,t),e.prototype.render=function(t){return'\n      <div id="'.concat(t.id,'" class="popup" onclick="%{onClick}%">\n        <div class="container container_narrow">\n          %{popupContent}%\n        </div>\n      </div>\n    ')},e}(Q),Dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(t){function e(){var e=t.call(this,{id:"LoadPopup"})||this;return e.setPropsWithoutRerender({popupContent:function(){return'<h1 class="container__header">Загрузка...</h1>'},onClick:function(){return null}}),e}return Dt(e,t),e}(kt),Ct=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},zt=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.PATCH="PATCH",t.DELETE="DELETE"}(Nt||(Nt={}));var Zt=function(){function t(){this.baseUrl=""}return t.prototype.get=function(t,e){return this.request({url:t,method:Nt.GET,data:e})},t.prototype.post=function(t,e){return this.request({url:t,method:Nt.POST,data:e})},t.prototype.put=function(t,e){return this.request({url:t,method:Nt.PUT,data:e})},t.prototype.delete=function(t,e){return this.request({url:t,method:Nt.DELETE,data:e})},t.prototype.request=function(t){var e=this,n=t.url,r=t.method,o=void 0===r?Nt.GET:r,i=t.data,a=void 0===i?"":i,c=t.tries,s=void 0===c?1:c,l=t.timeout,u=void 0===l?3e3:l,p=t.headers,f=void 0===p?{}:p,d="string"==typeof a?"string":"object"==typeof a&&a instanceof FormData?"formdata":T(a)?"json":"unknown",h=o===Nt.GET&&"json"===d?this.getUrlParams(a):"";return this.setRequestHeaders(f,d),new Promise((function(t,r){return function e(){var i,c,l=this,p=new XMLHttpRequest;p.open(o,this.baseUrl+n+h,!0),p.withCredentials=!0,p.timeout=u;try{for(var y=Ct(Object.entries(f)),b=y.next();!b.done;b=y.next()){var m=Lt(b.value,2),v=m[0],_=m[1];p.setRequestHeader(v,_)}}catch(t){i={error:t}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(i)throw i.error}}if(o!==Nt.GET&&a)if("json"===d)try{p.send(JSON.stringify(a))}catch(t){r(t)}else p.send(a);else p.send();p.onreadystatechange=function(){if(4===p.readyState){var e=p.responseText.replace(/^\"|\"$/g,""),n=l.getResponseHeaders(p),o={};if(n["content-type"]&&-1!==n["content-type"].indexOf("application/json"))try{o=JSON.parse(e)}catch(t){r(t)}var i={responseText:e,responseJSON:o,responseHeaders:n,status:p.status};p.status>=200&&p.status<=399?t(i):p.status>=400&&r(i)}};var g=function(t){--s>0?e():r(t)};p.onabort=g,p.onerror=g,p.ontimeout=g}.bind(e)()}))},t.prototype.setRequestHeaders=function(t,e){t.accept||("json"===e?t.accept="application/json":"formdata"===e&&(t.accept="*/*")),t["Content-Type"]||("json"===e?t["Content-Type"]="application/json; charset = UTF-8":"formdata"===e&&(t["Content-Type"]="multipart/form-data"))},t.prototype.getResponseHeaders=function(t){var e,n,r={},o=t.getAllResponseHeaders().trim().split("\r\n");try{for(var i=Ct(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(c&&-1!==c.indexOf(":")){var s=Lt(c.split(": "),2),l=s[0],u=s[1];r[l.toLowerCase()]=u.toLowerCase()}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.getKey=function(t,e){return e?"".concat(e,"[").concat(t,"]"):t},t.prototype.getParams=function(t,e){var n,r,o=[];try{for(var i=Ct(Object.entries(t)),a=i.next();!a.done;a=i.next()){var c=Lt(a.value,2),s=c[0],l=c[1];T(l)?o.push.apply(o,zt([],Lt(this.getParams(l,this.getKey(s,e))),!1)):o.push([this.getKey(s,e),encodeURIComponent(String(l))])}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.prototype.getUrlParams=function(t){if(!M(t))throw new Error("input must be an object");return"?"+this.getParams(t).map((function(t){return t.join("=")})).join("&")},t}(),Rt="https://ya-praktikum.tech/api/v2",Ut=new Zt;Ut.baseUrl=Rt;var Qt=function(t){return Ut.post("/user/search",t)},Vt=function(t){return Ut.post("/chats/token/".concat(t))},Bt=function(t){var n="Что-то пошло не так...";return"responseJSON"in t&&t.responseJSON&&"string"==typeof t.responseJSON.reason&&(n=t.responseJSON.reason),t instanceof Error?n=t.message:"number"==typeof t.status&&t.status>=500&&e.redirect("/".concat(t.status)),console.warn(n),ot.setState({currentError:n}),n},Gt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))},Ht=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Yt=function(){return Gt(void 0,void 0,void 0,(function(){var t,n;return Ht(this,(function(r){switch(r.label){case 0:return ot.setState({isLoading:!0}),t=!1,ot.state.user?(t=!0,[3,3]):[3,1];case 1:return setTimeout((function(){return g.emit("popupShow","LoadPopup")}),1),[4,Ft(!0)];case 2:r.sent(),ot.state.user&&(t=!0),r.label=3;case 3:return n=null,t?"/"!==e.currentRoute&&"/sing-up"!==e.currentRoute||(n="/chats"):"/settings"!==e.currentRoute&&"/settings/edit"!==e.currentRoute&&"/settings/password"!==e.currentRoute&&"/chats"!==e.currentRoute||(n="/"),setTimeout((function(){ot.setState({isLoading:!1,currentError:null}),n&&e.redirect(n),g.emit("popupHide")}),500),[2]}}))}))},Ft=function(t){return void 0===t&&(t=!1),Gt(void 0,void 0,void 0,(function(){return Ht(this,(function(e){switch(e.label){case 0:return[4,Ut.get("/auth/user").then((function(t){var e=t.responseJSON;ot.setState({user:e,currentError:null})})).catch((function(e){t||Bt(e)}))];case 1:return[2,e.sent()]}}))}))},Wt=new H({title:"Вход",popup:new Pt});Wt.on(Q.EVENTS.BEFORERENDER,Yt);var Jt=new st({name:"auth",Input:wt,Link:It,formSubmitButton:new(it(Et))({name:"submit",type:"submit",label:"Авторизоваться",isLoading:!1}),formError:new(it(ft))({currentFormError:null}),fieldset:function(){return'\n    <h1 class="container__header">%{title}%</h1>\n    %{ Input({"name": "login", "type": "text", "label": "Логин"}) }%\n    %{ Input({"name": "password", "type": "password", "label": "Пароль"}) }%\n    %{formSubmitButton}%\n    %{formError}%\n    %{ Link({"url": "/sing-up", "label": "Нет аккаунта?"}) }%\n  '}});Jt.on(st.EVENTS.SUBMIT_SUCCESS,(function(t){!function(t){Gt(void 0,void 0,void 0,(function(){return Ht(this,(function(n){return ot.setState({isLoading:!0}),function(t){return Ut.post("/auth/signin",t)}(t).then((function(){return Gt(void 0,void 0,void 0,(function(){return Ht(this,(function(t){switch(t.label){case 0:return[4,Ft()];case 1:return t.sent(),e.navigate("/chats"),[2]}}))}))})).catch(Bt).finally((function(){ot.setState({isLoading:!1})})),[2]}))}))}(t)})),Wt.props.contents=Jt;var qt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))},Xt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Kt=new H({title:"Регистрация",popup:new Pt});Kt.on(Q.EVENTS.BEFORERENDER,Yt);var $t=A([{name:"email",type:"email",label:"Почта"},{name:"login",type:"text",label:"Логин"},{name:"first_name",type:"text",label:"Имя"},{name:"second_name",type:"text",label:"Фамилия"},{name:"phone",type:"tel",label:"Телефон"},{name:"password",type:"password",label:"Пароль"},{name:"password2",type:"password",label:"Пароль (ещё раз)"}]),te=new st({name:"reg",Input:wt,Link:It,formSubmitButton:new(it(Et))({name:"submit",type:"submit",label:"Зарегистрироваться",isLoading:!1}),formError:new(it(ft))({currentFormError:null}),fieldset:function(){return'\n    <h1 class="container__header">%{title}%</h1>\n    %{ Input('.concat($t,'...) }%\n    %{formSubmitButton}%\n    %{formError}%\n    %{ Link({"url": "/", "label": "Войти"}) }%\n  ')}});te.on(st.EVENTS.SUBMIT_SUCCESS,(function(t){!function(t){qt(void 0,void 0,void 0,(function(){return Xt(this,(function(n){return ot.setState({isLoading:!0}),function(t){return Ut.post("/auth/signup",t)}(t).then((function(){return qt(void 0,void 0,void 0,(function(){return Xt(this,(function(t){switch(t.label){case 0:return[4,Ft()];case 1:return t.sent(),e.navigate("/chats"),[2]}}))}))})).catch(Bt).finally((function(){ot.setState({isLoading:!1})})),[2]}))}))}(t)})),Kt.props.contents=te;var ee=n(498),ne={};ne.styleTagTransform=h(),ne.setAttributes=u(),ne.insert=s().bind(null,"head"),ne.domAPI=a(),ne.insertStyleElement=f(),o()(ee.Z,ne),ee.Z&&ee.Z.locals&&ee.Z.locals;var re=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){function e(e){return t.call(this,e)||this}return re(e,t),e.prototype.render=function(){return'\n      %{popup}%\n      <div class="root">\n        <aside class="sidebar sidebar_nav">\n          <div class="sidebar__control">\n            %{aside}%\n          </div>\n        </aside>\n        <main class="container container_wide">\n          %{contents}%\n        </main>\n      </div>\n    '},e}(B),ie=n(324),ae={};ae.styleTagTransform=h(),ae.setAttributes=u(),ae.insert=s().bind(null,"head"),ae.domAPI=a(),ae.insertStyleElement=f(),o()(ie.Z,ae),ie.Z&&ie.Z.locals&&ie.Z.locals;var ce=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(t){function e(e){return t.call(this,e)||this}return ce(e,t),e.prototype.render=function(t){return'\n      <label class="container__row">\n        <span class="form__row-label">'.concat(t.label,'</span>\n        <span class="form__text_right">\n          <input\n            name="').concat(t.name,'"\n            type="').concat(t.type,'"\n            class="form__input_field form__input_field_right"\n            value="').concat(t.value||"",'"\n            onblur="%{onBlur}%"\n            onfocus="%{onFocus}%"\n            oninput="%{onInput}%"\n            ').concat(t.readonly?'readonly="readonly"':"",'>\n          <span class="form__input-error">').concat(t.error||"","</span>\n        </span>\n      </label>\n    ")},e}(mt),le=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=function(t){function e(e){return t.call(this,e)||this}return le(e,t),e.prototype.render=function(t){return'\n      <div class="container__row">\n        <a onclick="%{onclickHandler}%"\n          class="form__row-label container__link '.concat(t.style,'">\n            ').concat(t.label,"\n        </a>\n      </div>\n    ")},e}(J),pe=n(282),fe={};fe.styleTagTransform=h(),fe.setAttributes=u(),fe.insert=s().bind(null,"head"),fe.domAPI=a(),fe.insertStyleElement=f(),o()(pe.Z,fe),pe.Z&&pe.Z.locals&&pe.Z.locals;var de=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),he=function(t){function e(e){var n=t.call(this,e)||this;return n.setPropsWithoutRerender({showPopup:n.showPopup.bind(n)}),n}return de(e,t),e.prototype.showPopup=function(){"string"==typeof this.props.forId&&g.emit("popupShow",this.props.forId)},e}(Q),ye=function(t){return function(t){return"".concat(Rt,"/resources").concat(t)}(t)},be=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(t){function e(e){return t.call(this,e)||this}return be(e,t),e.prototype.render=function(t){var e="";if(t&&t.user){var n=t.user;n.avatar&&(e=ye(lt(n.avatar)))}return t&&t.unclickable?'<div class="form__avatar"\n        '.concat(e?'style="background-image: url('+e+')"':"","></div>"):'\n        <div class="form__avatar" onclick="%{showPopup}%"\n        '.concat(e?'style="background-image: url('+e+')"':"",'>\n          <div class="form__avatar-control">\n            <span>Поменять аватар</span>\n          </div>\n        </div>\n      ')},e}(he),ve=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=function(t){function e(e){var n=t.call(this,e)||this;return n.setPropsWithoutRerender({Input:wt,formSubmitButton:new(it(Et))({name:"submit",type:"submit",label:e.submitLabel,style:e.submitStyle||"",isLoading:!1}),formError:new(it(ft))({currentError:null}),fieldset:function(){return'\n        <h1 class="container__header">'.concat(e.header,"</h1>\n        ").concat(e.inputs||"","\n        %{formSubmitButton}%\n        %{formError}%\n      ")}}),n}return ve(e,t),e}(st),ge=n(552),we={};we.styleTagTransform=h(),we.setAttributes=u(),we.insert=s().bind(null,"head"),we.domAPI=a(),we.insertStyleElement=f(),o()(ge.Z,we),ge.Z&&ge.Z.locals&&ge.Z.locals;var xe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Me=function(t){function e(e){var n=t.call(this,e)||this;return n.on("change",(function(){n.emit("updated")})),n}return xe(e,t),e.prototype.render=function(t){var e="";return t&&t.value&&(e=t.value.split(/[\\/]+/).pop()),'\n      <div class="container__element container__element_centered">\n        <p class="form__input_file-note">\n          '.concat(e?"Выбран файл: "+e:"",'\n        </p>\n        <label class="form__input_file-wrapper">\n          <a class="container__link container__link_underlined">\n            Выбрать ').concat(e?"другой":"",' файл <br>на компьютере\n          </a>\n          <input name="').concat(t.name,'" type="file"\n            accept="').concat(t.accept,'" \n            class="form__input_file"\n            onchange="%{onChange}%">\n        </label>\n        <span class="form__input-error">').concat(t.error||"","</span>\n      </div>\n    ")},e}(mt),Se=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))},Ee=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Te=function(t,e){return Se(void 0,void 0,void 0,(function(){return Ee(this,(function(t){return(n=e,Ut.put("/user/profile/avatar",n)).then((function(t){var e=t.responseJSON;ot.setState({user:e,currentError:null}),g.emit("popupHide")})).catch(Bt),[2];var n}))}))},Ie=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(t){function e(){var e=t.call(this,{id:"AvatarPopup"})||this,n=new _e({name:"avatar",header:"Загрузите файл",submitLabel:"Поменять",fileInput:new Me({name:"avatar",accept:"image/png, image/jpeg"}),inputs:"%{fileInput}%"});return e.setPropsWithoutRerender({popupContent:n}),n.on(st.EVENTS.SUBMIT_SUCCESS,Te),e}return Ie(e,t),e}(kt),Oe=n(711),Ne={};Ne.styleTagTransform=h(),Ne.setAttributes=u(),Ne.insert=s().bind(null,"head"),Ne.domAPI=a(),Ne.insertStyleElement=f(),o()(Oe.Z,Ne),Oe.Z&&Oe.Z.locals&&Oe.Z.locals;var Ae=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t){function e(e){return t.call(this,e)||this}return Ae(e,t),e.prototype.render=function(t){return'\n      <button onclick="%{onclickHandler}%" \n        '.concat(t.type?'type="'+t.type+'"':"","\n        ").concat(t.isLoading?'disabled="disabled"':"",'\n        class="form__button form__button_standard form__button_round \n        ').concat(t.style||"",'">\n          ').concat(t.label,"\n      </button>\n    ")},e}(J),De=new oe({title:"Профиль",popup:[Pt,je],aside:new ke({url:"/chats",label:"⬅"})});De.on(Q.EVENTS.BEFORERENDER,Yt);var Pe=[{name:"email",type:"email",label:"Почта"},{name:"login",type:"text",label:"Логин"},{name:"first_name",type:"text",label:"Имя"},{name:"second_name",type:"text",label:"Фамилия"},{name:"display_name",type:"text",label:"Имя в чате"},{name:"phone",type:"tel",label:"Телефон"}],Ce=new(it(st))({name:"profile",RowInput:se,RowLink:ue,avatarControl:new(it(me))({forId:"AvatarPopup"}),logoutLink:new ue({url:"/",label:"Выйти",style:"container__link_danger",onclick:function(){return Gt(void 0,void 0,void 0,(function(){return Ht(this,(function(t){return ot.setState({isLoading:!0}),Ut.post("/auth/logout").catch(Bt).finally((function(){ot.setState({user:null,isLoading:!1,currentError:null}),e.navigate("/")})),[2]}))}))}}),fieldset:function(){var t,e=Ce.props.user;return e&&Ce.props.inputs?'\n        %{ avatarControl }%\n        <h1 class="container__header">\n          '.concat(null!==(t=lt(e.first_name))&&void 0!==t?t:"","\n        </h1>\n        %{ RowInput(").concat(Ce.props.inputs,'...) }%\n        <br class="form__section-break">\n        %{ RowLink({"url": "/settings/edit", "label": "Изменить данные"}) }%\n        %{ RowLink({"url": "/settings/password", "label": "Изменить пароль"}) }%\n        %{logoutLink}%\n      '):'<h1 class="container__header">Загружаю...</h1>'}});Ce.on(Q.EVENTS.BEFORERENDER,(function(){var t,e,n=Ce.props.user;if(n){try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),o=r.next();!o.done;o=r.next()){var i=o.value;i.value=n[i.name],i.readonly=!0}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}Ce.props.inputs=A(Pe)}})),De.props.contents=Ce;var Le=new oe({title:"Изменить данные",popup:[Pt,je],aside:new ke({url:"/settings",label:"⬅"})});Le.on(Q.EVENTS.BEFORERENDER,Yt);var ze=new(it(st))({name:"profile",Input:se,avatarControl:new(it(me))({forId:"AvatarPopup"}),formSubmitButton:new(it(Et))({name:"submit",type:"submit",label:"Сохранить",isLoading:!1}),formError:new(it(ft))({currentError:null}),fieldset:function(){return ze.props.user&&ze.props.inputs?"\n        %{avatarControl}%\n        %{ Input(".concat(ze.props.inputs,'...) }%\n        <br class="form__section-break">\n        %{formSubmitButton}%\n        %{formError}%\n      '):'<h1 class="container__header">Загружаю...</h1>'}});ze.on(Q.EVENTS.BEFORERENDER,(function(){var t,e,n=ze.props.user;if(n){try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),o=r.next();!o.done;o=r.next()){var i=o.value;i.value=n[i.name],i.readonly=!1}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}ze.props.inputs=A(Pe)}})),ze.on(st.EVENTS.SUBMIT_SUCCESS,(function(t){return Se(void 0,void 0,void 0,(function(){return Ee(this,(function(n){return function(t){return Ut.put("/user/profile",t)}(t).then((function(t){var n=t.responseJSON;ot.setState({user:n,currentError:null}),e.navigate("/settings")})).catch(Bt),[2]}))}))})),Le.props.contents=ze;var Ze=new oe({title:"Изменить пароль",popup:new Pt,aside:new ke({url:"/settings",label:"⬅"})});Ze.on(Q.EVENTS.BEFORERENDER,Yt);var Re=new st({name:"changepassword",Input:se,avatarControl:new(it(me))({unclickable:!0}),formSubmitButton:new(it(Et))({name:"submit",type:"submit",label:"Сохранить",isLoading:!1}),formError:new(it(ft))({currentError:null}),fieldset:function(){return'\n    %{avatarControl}%\n    %{ Input({\n      "label": "Старый пароль", "name": "oldPassword", "type": "password",\n      "placeholder": "********"\n    }) }%\n    %{ Input({\n      "label": "Новый пароль", "name": "newPassword", "type": "password",\n      "placeholder": "********"\n    }) }%\n    %{ Input({\n      "label": "Повторите новый пароль", "name": "newPassword2",\n      "type": "password",\n      "placeholder": "********"\n    }) }%\n    <br class="form__section-break">\n    %{formSubmitButton}%\n    %{formError}%\n  '}});Re.on(st.EVENTS.SUBMIT_SUCCESS,(function(t){return Se(void 0,void 0,void 0,(function(){return Ee(this,(function(n){return function(t){return Ut.put("/user/password",t)}(t).then((function(){ot.setState({currentError:null}),e.navigate("/settings")})).catch(Bt),[2]}))}))})),Ze.props.contents=Re;var Ue=n(211),Qe={};Qe.styleTagTransform=h(),Qe.setAttributes=u(),Qe.insert=s().bind(null,"head"),Qe.domAPI=a(),Qe.insertStyleElement=f(),o()(Ue.Z,Qe),Ue.Z&&Ue.Z.locals&&Ue.Z.locals;var Ve=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Be=function(t){function e(e){var n=t.call(this,e)||this;return g.on("updateLayoutScrollPosition",(function(){var t=document.querySelector("main");t&&(t.scrollTop=t.scrollHeight)})),n}return Ve(e,t),e.prototype.render=function(){return'\n      %{popup}% \n      <div class="root">\n        <aside class="sidebar sidebar_chatlist scrollable">\n          %{aside}%\n        </aside>\n        <main class="container container_chatbox scrollable">\n          %{contents}%\n        </main>\n      </div>\n    '},e}(B),Ge=n(260),He={};He.styleTagTransform=h(),He.setAttributes=u(),He.insert=s().bind(null,"head"),He.domAPI=a(),He.insertStyleElement=f(),o()(Ge.Z,He),Ge.Z&&Ge.Z.locals&&Ge.Z.locals;var Ye=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],Fe=["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"],We=function(t){var e=t?new Date(t):new Date;return{year:e.getFullYear(),month:Fe[e.getMonth()],day:e.getDate(),weekday:Ye[e.getDay()],hour:("0"+e.getHours()).slice(-2),min:("0"+e.getMinutes()).slice(-2)}},Je=function(t){if(!t)return"";var e=We(),n=We(t);if(e.year!==n.year)return"".concat(n.day,"&nbsp;").concat(n.month," ").concat(n.year,"&nbsp;г.");var r=e.day-n.day;return e.month!==n.month||r>6?"".concat(n.day,"&nbsp;").concat(n.month):r>0?"".concat(n.weekday):"".concat(n.hour,":").concat(n.min)},qe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xe=function(t){function e(e){var n=t.call(this,e)||this;return n.setPropsWithoutRerender({active:e.id===ot.state.activeChatId,activate:function(){return setTimeout((function(){var t;n.toggleActive();var e=null!==(t=n.props.id)&&void 0!==t?t:0;g.emit("chatSelected",e),ot.setState({activeChatId:e})}),1)}}),n}return qe(e,t),e.prototype.toggleActive=function(){this.setProps({active:!0})},e.prototype.toggleInactive=function(){this.setProps({active:!1})},e.prototype.toggleShow=function(){this.setProps({hidden:!1})},e.prototype.toggleHide=function(){this.setProps({hidden:!0})},e.prototype.render=function(t){var e="";"string"==typeof(t=lt(t)).avatar&&(e=ye(t.avatar));var n,r={time:"",content:""};return"object"==typeof t.last_message&&null!==t.last_message&&(r=t.last_message),'\n      <li class="chatlist__item \n        '.concat(t.active?"chatlist__item_active":"","\n        ").concat(t.hidden?"chatlist__item_hidden":"",'"\n        onclick="%{activate}%">\n        <div class="chatlist__item-wrapper">\n          <div class="chatlist__item-avatar"\n          ').concat(e?'style="background-image: url('+e+')"':"",'></div>\n          <div class="chatlist__item-text">\n            <div class="chatlist__item-name">').concat(t.title||"",'</div>\n            <div class="chatlist__item__message">\n              <span class="chatlist__item-message-quote">\n                ').concat((n=r.content||"В этом чате пока нет сообщений",n.slice(0,40)),'\n              </span>\n            </div>\n          </div>\n          <div class="chatlist__item-info">\n            <div class="chatlist__item-time">\n              ').concat(Je(r.time),'\n            </div>\n            <div class="chatlist__item-unreads">\n              <span class="chatlist__item-unreads-count"\n                >').concat(t.unread_count||"","</span>\n            </div>\n          </div>\n        </div>\n      </li>\n    ")},e}(Q),Ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(t){function e(e){var n=t.call(this,e)||this;return n.props.reactivate=function(){n.listDescendants((function(t){t.toggleInactive()}))},n}return Ke(e,t),e.prototype.filterChats=function(t){this.listDescendants((function(e){var n;if(e.toggleShow&&e.toggleHide)if(""!==t){var r="";e.props.title&&(r+=e.props.title);var o=e.props;null!==o.last_message&&"string"==typeof(null===(n=o.last_message)||void 0===n?void 0:n.content)&&(r+=o.last_message.content),-1!==r.toLowerCase().indexOf(t.toLowerCase())?e.toggleShow():e.toggleHide()}else e.toggleShow()}))},e.prototype.render=function(t){var e,n;if("object"==typeof t.chats&&t.chats instanceof Array){var r=[];try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.chats),i=o.next();!i.done;i=o.next()){var a=i.value;r.push(new Xe(a))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return this.props.chatList=r,'\n        <ul onclick="%{reactivate}%">\n          %{chatList}%\n        </ul>\n      '}return""},e}(Q),tn=n(571),en={};en.styleTagTransform=h(),en.setAttributes=u(),en.insert=s().bind(null,"head"),en.domAPI=a(),en.insertStyleElement=f(),o()(tn.Z,en),tn.Z&&tn.Z.locals&&tn.Z.locals;var nn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rn=function(t){function e(e){return t.call(this,e)||this}return nn(e,t),e.prototype.render=function(t){return'\n      <span class="chatbox__dropdown-element" onclick="%{showPopup}%">\n        <span class="chatbox__icon '.concat(t.iconStyle,'">\n          ').concat(t.iconText?t.iconText:"","\n        </span>\n        ").concat(t.label,"\n      </span>\n    ")},e}(he),on=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(t){function e(){var e=t.call(this)||this,n=new he({forId:"DeleteChatPopup"});return e.setPropsWithoutRerender({addUser:new rn({label:"Добавить пользователя",iconStyle:"chatbox__icon-circle",iconText:"+",forId:"AddUserPopup"}),remUser:new rn({label:"Удалить пользователя",iconStyle:"chatbox__icon-circle chatbox__icon_danger",iconText:"×",forId:"DeleteUserPopup"}),deleteChat:new Et({name:"deleteChat",label:"Удалить чат",style:"form__button_danger",onclick:function(){n.showPopup()}})}),e}return on(e,t),e.prototype.render=function(){return'\n      <div class="chatbox__header-avatar"></div>\n\n      <h2 class="chatbox__header-text">%{title}%</h2>\n\n      <label class="chatbox__header-control-wrapper">\n        <input type="checkbox" \n          class="chatbox__dropdown-toggle chatbox__element_hidden">\n        <a class="chatbox__header-control chatbox__dropdown-control">⋮</a>\n        <span class="chatbox__dropdown chatbox__dropdown_top">\n          <span class="chatbox__dropdown-menu">\n            %{addUser}%\n            %{remUser}%\n            %{deleteChat}%\n          </span>\n        </span>\n      </label>\n    '},e}(Q),cn=n(39),sn={};sn.styleTagTransform=h(),sn.setAttributes=u(),sn.insert=s().bind(null,"head"),sn.domAPI=a(),sn.insertStyleElement=f(),o()(cn.Z,sn),cn.Z&&cn.Z.locals&&cn.Z.locals;var ln=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),un=function(t){function e(e){var n=t.call(this,e)||this;return n.props.onKeydown=function(t){var e,n;if(t.keyCode&&13===t.keyCode&&!t.shiftKey){t.preventDefault();var r=new Event("submit",{bubbles:!0,cancelable:!0});null===(n=null===(e=t.currentTarget.form)||void 0===e?void 0:e.dispatchEvent)||void 0===n||n.call(e,r)}},n.on("submit",(function(){var t;n.setProps({value:""}),null===(t=n.getElement())||void 0===t||t.focus()})),n}return ln(e,t),e.prototype.render=function(t){return'\n      <textarea name="'.concat(t.name,'" class="chatbox__send-textarea" rows="1"\n        onblur="%{onBlur}%"\n        onfocus="%{onFocus}%"\n        oninput="%{onInput}%"\n        onkeydown="%{onKeydown}%"\n      >').concat(t.value||t.placeholder||"","</textarea>\n    ")},e}(mt),pn=function(){function t(){if(this.activeSocket=null,t.__instance)return t.__instance;t.__instance=this}return t.prototype.init=function(t){var e=t.userId,n=t.chatId,r=t.token;this.close(),this.activeSocket=new WebSocket("".concat("wss://ya-praktikum.tech/ws/chats","/").concat(e,"/").concat(n,"/").concat(r)),this.registerEvents()},t.prototype.close=function(){this.activeSocket&&(this.activeSocket.close(),this.activeSocket=null)},t.prototype.registerEvents=function(){null!==this.activeSocket&&(g.emit("webSocketInit"),this.activeSocket.addEventListener("open",(function(){g.emit("webSocketOpen")})),this.activeSocket.addEventListener("close",(function(t){g.emit("webSocketClose",t)})),this.activeSocket.addEventListener("message",(function(t){g.emit("webSocketMessage",t.data)})),this.activeSocket.addEventListener("error",(function(t){g.emit("webSocketError",t)})))},t.prototype.send=function(t){this.activeSocket&&this.activeSocket.readyState!==WebSocket.CLOSED&&this.activeSocket.send(A(t))},t}(),fn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))},dn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},hn=null,yn=function(){hn&&clearTimeout(hn),jn()};function bn(t,e){var n,r,o;return o=null!==t.last_message&&(null===(n=t.last_message)||void 0===n?void 0:n.time)?new Date(t.last_message.time).getTime():(new Date).getTime(),(null!==e.last_message&&(null===(r=e.last_message)||void 0===r?void 0:r.time)?new Date(e.last_message.time).getTime():(new Date).getTime())-o}var mn=function(){return fn(void 0,void 0,void 0,(function(){return dn(this,(function(t){return ot.setState({isLoading:!0}),Ut.get("/chats").then((function(t){var e=t.responseJSON;if(304!==t.status||0===ot.state.chats.length){var n=e;n=n.sort(bn),ot.setState({chats:n,currentError:null})}hn&&clearTimeout(hn),hn=setTimeout((function(){mn()}),15e3)})).catch((function(t){Bt(t),ot.setState({user:null,currentError:null}),e.redirect("/")})).finally((function(){ot.setState({isLoading:!1})})),[2]}))}))},vn=function(t){return fn(void 0,void 0,void 0,(function(){return dn(this,(function(e){return ot.setState({isLoading:!0}),function(t){return Ut.post("/chats",t)}(t).then((function(e){var n=e.responseJSON;return fn(void 0,void 0,void 0,(function(){var e,r;return dn(this,(function(o){switch(o.label){case 0:return e=null!==(r=n.id)&&void 0!==r?r:0,g.emit("popupHide"),ot.setState({currentError:null,activeChatId:e}),gn({login:t.title},!0),[4,mn()];case 1:return o.sent(),ot.state.activeChatId=0,g.emit("chatSelected",e),ot.state.activeChatId=e,[2]}}))}))})).catch(Bt).finally((function(){ot.setState({isLoading:!1})})),[2]}))}))},_n=function(){return fn(void 0,void 0,void 0,(function(){var t;return dn(this,(function(e){return ot.setState({isLoading:!0}),yn(),t=ot.getState().activeChatId,(n={chatId:t},Ut.delete("/chats",n)).then((function(){g.emit("popupHide"),g.emit("chatSelected",0),ot.setState({activeChatId:0}),mn()})).catch(Bt).finally((function(){ot.setState({isLoading:!1})})),[2];var n}))}))},gn=function(t,e){return void 0===e&&(e=!1),fn(void 0,void 0,void 0,(function(){var n;return dn(this,(function(r){return ot.setState({isLoading:!0}),n=ot.getState().activeChatId,Qt(t).then((function(r){var o,i=r.responseJSON;if(i instanceof Array&&0!==i.length)i[0].login===t.login&&function(t){Ut.put("/chats/users",t)}({chatId:n,users:[null!==(o=i[0].id)&&void 0!==o?o:0]});else if(!e)throw new Error("Пользователь с таким логином не найден");g.emit("popupHide")})).catch(Bt).finally((function(){ot.setState({isLoading:!1})})),[2]}))}))},wn=function(t){return fn(void 0,void 0,void 0,(function(){var e;return dn(this,(function(n){return ot.setState({isLoading:!0}),e=ot.getState().activeChatId,Qt(t).then((function(n){var r,o=n.responseJSON;if(!(o instanceof Array&&0!==o.length))throw new Error("Пользователь с таким логином не найден");o[0].login===t.login&&function(t){Ut.delete("/chats/users",t)}({chatId:e,users:[null!==(r=o[0].id)&&void 0!==r?r:0]}),g.emit("popupHide")})).catch(Bt).finally((function(){ot.setState({isLoading:!1})})),[2]}))}))},xn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))},Mn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Sn=1e3,En=new pn,Tn=null,In=null,jn=function(){Tn&&clearTimeout(Tn),In&&clearInterval(In)};g.on("chatSelected",(function(t){var e=ot.getState().activeChatId;t&&e!==t&&(ot.setState({activeChatMessages:[],isLoading:!0}),jn(),Tn=setTimeout((function(){Nn()}),1e3))}));var On=function(t){return xn(void 0,void 0,void 0,(function(){return Mn(this,(function(e){return[2,Vt(t).then((function(t){return t.responseJSON.token})).catch(Bt)]}))}))},Nn=function(){return xn(void 0,void 0,void 0,(function(){var t,e,n,r;return Mn(this,(function(o){switch(o.label){case 0:return(t=ot.getState().user)&&"id"in t&&"number"==typeof t.id?(e=t.id,n=ot.getState().activeChatId,[4,On(n)]):(Bt(new Error("No user ID")),[2]);case 1:return(r=o.sent())?(En.init({userId:e,chatId:n,token:r}),[2]):(Bt(new Error("Token error")),[2])}}))}))},An=function(t){return xn(void 0,void 0,void 0,(function(){return Mn(this,(function(e){return En.send({content:t.message,type:"message"}),[2]}))}))};function kn(t,e){return t.time&&e.time?new Date(t.time).getTime()-new Date(e.time).getTime():0}g.on("webSocketInit",(function(){ot.setState({activeChatMessages:[],isLoading:!0})})),g.on("webSocketClose, webSocketError",(function(){ot.setState({isLoading:!0}),jn(),Tn=setTimeout((function(){Nn()}),Sn*=2)})),g.on("webSocketClose",(function(t){t.wasClean||console.warn("webSocketClose","Code: ".concat(t.code||""," | Reason: ").concat(t.reason||""))})),g.on("webSocketError",(function(t){console.warn("webSocketError",t.message)})),g.on("webSocketOpen",(function(){ot.setState({isLoading:!1}),xn(void 0,void 0,void 0,(function(){return Mn(this,(function(t){return En.send({content:"0",type:"get old"}),[2]}))})),mn(),jn(),In=setInterval((function(){En.send({type:"ping"})}),3e4)})),g.on("webSocketMessage",(function(t){var e=ot.getState().activeChatMessages;if("object"==typeof e&&e instanceof Array){var n=e.length,r=N(t);r instanceof Array?(e.push.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(r),!1)),e=e.sort(kn)):r.type&&"pong"!==r.type&&e.push(r),n!==e.length&&ot.setState({activeChatMessages:e,count:e.length})}}));var Dn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=function(t){function e(){var e=t.call(this)||this,n=new st({name:"msg",fieldset:Cn});return e.setPropsWithoutRerender({content:n,messageTextarea:new un({name:"message",placeholder:"Сообщение..."}),sendButton:new(it(ke))({label:"➜",type:"submit",style:"chatbox__send-button",isLoading:!0}),attachPhoto:new rn({label:"Фото или видео",iconStyle:"chatbox__icon_photo"}),attachFile:new rn({label:"Файл",iconStyle:"chatbox__icon_file"}),attachLocation:new rn({label:"Локация",iconStyle:"chatbox__icon_location"})}),n.on(st.EVENTS.SUBMIT_SUCCESS,An),e}return Dn(e,t),e.prototype.render=function(){return"%{content}%"},e}(Q),Cn=function(){return'\n  <label class="chatbox__footer-control-wrapper">\n    <input type="checkbox" \n      class="chatbox__dropdown-toggle chatbox__element_hidden">\n    <a class="chatbox__attach-control chatbox__dropdown-control"></a>\n    <span class="chatbox__dropdown chatbox__dropdown_bottom">\n      <span class="chatbox__dropdown-menu">\n        %{attachPhoto}%\n        %{attachFile}%\n        %{attachLocation}%\n      </span>\n    </span>\n  </label>\n\n  %{messageTextarea}%\n\n  %{sendButton}%\n'},Ln=n(513),zn={};zn.styleTagTransform=h(),zn.setAttributes=u(),zn.insert=s().bind(null,"head"),zn.domAPI=a(),zn.insertStyleElement=f(),o()(Ln.Z,zn),Ln.Z&&Ln.Z.locals&&Ln.Z.locals;var Zn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rn=function(){return Rn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Rn.apply(this,arguments)},Un=function(t){function e(e){return t.call(this,e)||this}return Zn(e,t),e.prototype.render=function(t){var e,n,r=t.activeChatMessages;if("object"!=typeof r||!(r instanceof Array))return"";if(t.isLoading&&0===r.length)return'\n        <div class="chatbox__stub">\n          Загрузка...\n        </div>\n      ';var o=[],i=this.props.user;if(i&&"id"in i&&"number"==typeof i.id)try{for(var a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),c=a.next();!c.done;c=a.next()){var s=c.value;if("message"===s.type){var l=s.user_id===i.id?"out":"inc";o.push(new Qn(Rn(Rn({},s),{direction:l})))}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return this.props.messages=o,'\n        <ul class="chatbox__messages-wrapper">\n          %{messages}%\n        </ul>\n      '},e}(Q),Qn=function(t){function e(e){return t.call(this,e)||this}return Zn(e,t),e.prototype.render=function(t){return"string"==typeof(t=lt(t)).content&&""!==t.content?'\n        <li class="chatbox__message chatbox__message_'.concat(t.direction,'">\n          <span class="chatbox__message-text">').concat(t.content,'</span>\n          <span class="chatbox__message-info">\n            <span class="chatbox__message-status">\n              ').concat(t.status?"✓✓":"",'&nbsp;\n            </span>\n            <time class="chatbox__message__time">\n              ').concat(Je(t.time),"\n            </time>\n          </span>\n        </li>\n      "):""},e}(Q),Vn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bn=function(t){function e(e){var n=t.call(this,e)||this,r=new(it(Un));return n.setPropsWithoutRerender({ChatBoxHeader:an,ChatBoxFooter:Pn,msgArea:r}),r.on("".concat(Q.EVENTS.MOUNT,", ").concat(Q.EVENTS.REMOUNT),(function(){g.emit("updateLayoutScrollPosition")})),g.on("chatSelected",(function(t){var e=null,r=ot.getState().chats;"object"==typeof r&&r instanceof Array&&(e=r.find((function(e){return e.id===t}))),e?n.setProps({id:e.id,title:lt(e.title)}):n.setProps({id:0})})),n}return Vn(e,t),e.prototype.render=function(t){return t.id?'\n        <div class="chatbox__header">\n          %{ChatBoxHeader}%\n        </div>\n        <div class="chatbox__body">\n          %{msgArea}%\n        </div>\n        <div class="chatbox__footer">\n          %{ChatBoxFooter}%\n        </div>\n      ':'\n        <div class="chatbox__stub">\n          Выберите или создайте чат, чтобы отправить сообщение\n        </div>\n      '},e}(Q),Gn=n(215),Hn={};Hn.styleTagTransform=h(),Hn.setAttributes=u(),Hn.insert=s().bind(null,"head"),Hn.domAPI=a(),Hn.insertStyleElement=f(),o()(Gn.Z,Hn),Gn.Z&&Gn.Z.locals&&Gn.Z.locals;var Yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=function(t){function e(e){return t.call(this,e)||this}return Yn(e,t),e.prototype.render=function(t){return'\n      <div class="chatlist__search-field-wrapper">\n        <input name="'.concat(t.name,'" type="text"\n          class="form__input_field chatlist__search-field"\n          value="').concat(t.value||"",'"\n          oninput="%{onInput}%"\n          onblur="%{onBlur}%"\n          onfocus="%{onFocus}%">\n        <label class="chatlist__search-label">\n          <span class="chatlist__search-label-icon"></span>\n          <span class="chatlist__search-label-text">Поиск...</span>\n        </label>\n      </div>\n    ')},e}(mt),Wn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jn=function(t){function e(){var e=t.call(this,{id:"AddUserPopup"})||this,n=new _e({name:"addUser",header:"Добавить пользователя",submitLabel:"Добавить",inputs:'%{ Input({"name": "login", "label": "Логин"}) }%'});return e.setPropsWithoutRerender({popupContent:n}),n.on(st.EVENTS.SUBMIT_SUCCESS,gn),e}return Wn(e,t),e}(kt),qn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xn=function(t){function e(){var e=t.call(this,{id:"DeleteUserPopup"})||this,n=new _e({name:"deleteUser",header:"Удалить пользователя из чата",submitLabel:"Удалить",inputs:'%{ Input({"name": "login", "label": "Логин"}) }%'});return e.setPropsWithoutRerender({popupContent:n}),n.on(st.EVENTS.SUBMIT_SUCCESS,wn),e}return qn(e,t),e}(kt),Kn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$n=function(t){function e(){var e=t.call(this,{id:"AddChatPopup"})||this,n=new _e({name:"addChat",header:"Добавить чат",submitLabel:"Добавить",inputs:'%{ Input({"name": "title", "label": "Чат"}) }%'});return e.setPropsWithoutRerender({popupContent:n}),n.on(st.EVENTS.SUBMIT_SUCCESS,vn),e}return Kn(e,t),e}(kt),tr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),er=new Be({title:"Чаты",popup:[Pt,Jn,Xn,$n,function(t){function e(){var e=t.call(this,{id:"DeleteChatPopup"})||this,n=new _e({name:"deleteChat",header:"Удалить чат",submitLabel:"Удалить",submitStyle:"form__button_danger"});return e.setPropsWithoutRerender({popupContent:n}),n.on(st.EVENTS.SUBMIT_SUCCESS,_n),e}return tr(e,t),e}(kt)]});er.on(Q.EVENTS.BEFORERENDER,Yt),er.on(Q.EVENTS.BEFORERENDER,mn),er.on(Q.EVENTS.UNMOUNT,yn);var nr=new(it($e));nr.ignoreSync(["isLoading"]);var rr=new Fn({name:"search"});rr.on("input",(function(){var t;nr.filterChats(null!==(t=rr.props.value)&&void 0!==t?t:"")})),nr.on(Q.EVENTS.UPDATE,(function(){setTimeout((function(){var t;nr.filterChats(null!==(t=rr.props.value)&&void 0!==t?t:"")}),10)})),er.props.contents=new Bn,er.props.profileLink=new J({url:"/settings",label:"Профиль&nbsp;&nbsp;<small>❯</small>"});var or=new he({forId:"AddChatPopup"});er.props.addChatButton=new ke({label:"<b>＋</b>&nbsp;Новый чат&nbsp;",onclick:function(){or.showPopup()}}),er.props.searchInput=rr,er.props.chatList=nr,er.props.aside=function(){return'\n  <nav>\n    <div class="container__element chatlist__controls">\n      <span>\n        %{addChatButton}%\n      </span>\n      <span class="container__link container__link_secondary">\n        %{profileLink}%\n      </span>\n    </div>\n    <div class="container__element">\n      %{searchInput}%\n    </div>\n  </nav>\n  %{chatList}%\n'};var ir=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(t){function e(e){return t.call(this,e)||this}return ir(e,t),e.prototype.render=function(){return'\n      <div class="root">\n        <main class="container container_wide">\n          %{contents}%\n        </main>\n      </div>\n    '},e}(B),cr=function(){return'\n  <h1 class="container__header container__header_big">%{title}%</h1>\n  <h2 class="container__header">%{comment}%</h2>\n  <div class="container__element container__element_centered">\n    <span class="container__link">%{navLink}%</span>\n  </div>\n'},sr=new ar({title:"404",comment:"Не туда попали",contents:cr,navLink:new J({url:"/chats",label:"Назад к чатам"})}),lr=new ar({title:"500",comment:"Уже фиксим",contents:cr,navLink:new J({url:"/chats",label:"Назад к чатам"})});lr.on(Q.EVENTS.BEFORERENDER,(function(){lr.updateTitle(e.getCurrentPathname(!0))})),e.basePath="/messenger",e.registerRoutes({"/5\\d\\d":lr,"/menu":X,"/":Wt,"/sing-up":Kt,"/settings":De,"/settings/edit":Le,"/settings/password":Ze,"/chats":er}),e.registerNotFound({"/404":sr}),e.navigate(location.pathname)})()})();